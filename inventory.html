<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<script src='file:///android_asset/app.js'></script>
<link href="css/all.css" rel="stylesheet">

    <link href="boostrap/css/bootstrap2.css" rel="stylesheet">
    <link href="boostrap/css/bootstrap3.css" rel="stylesheet">
    <link href="boostrap/css/bootstrap4.css" rel="stylesheet">
    <link href="boostrap/css/bootstrap5.css" rel="stylesheet">
    <link href="boostrap/css/bootstrap6.css" rel="stylesheet">
    <link href="boostrap/css/bootstrap7.css" rel="stylesheet">
    <link href="boostrap/css/bootstrap8.css" rel="stylesheet">
    <link href="boostrap/css/swiper.min.css" rel="stylesheet">

<script src="js/all.js"></script>
    <script src="boostrap/js/jquery.js"></script>
    <script src="boostrap/js/date.js"></script>
    <script src="boostrap/js/date2.js"></script>
    <script src="boostrap/js/bootstrap.js" type="text/javascript" ></script>


<style id="mystyle">
body{
height:100%;
}
.mcontainer{
display:inline-block;
margin:auto;
border-radius:5px;
padding-bottom:14px;
width:94%;
margin-top:7px;
}
.dropcontainer{
display:inline-block;
margin:auto;
border-radius:5px;
width:96%;
margin-top:10px;
height:40px;
}
.dropdown-menu
{
height:350px;
width:100%;  
border:none;
outline:none;
}
.mydrop
{
height:350px;
width:100%;
overflow:scroll;     
}


button:hover{
box-shadow:1px 1px 5px grey,  -1px -1px 5px white;

}
html,body {
  text-size-adjust: none;
  -webkit-text-size-adjust: none;
  -moz-text-size-adjust: none;
  -ms-text-size-adjust: none;
}

input{
width:100%;
height:60px;
border:none;
outline:none;
background:none;
font-weight:bold;
font-family:times;
padding-left:10px;
}

@mixin nonselect {
	-webkit-touch-callout: none;
    -webkit-user-select: none;
     -khtml-user-select: none;
       -moz-user-select: none;
        -ms-user-select: none;
            user-select: none;
	cursor: default;
}
.listitem{
height:40px;
width:96%;
margin-left:2%;
margin-top:5px;
}
.mybar{
height:10px;
width:100%;
}
td
{
height:25px;
}
.span{
		animation: blink .5s linear infinite;
	}
@keyframes blink{
0%{opacity: 0;}
100%{opacity: 1;}
}


.upload-btn-wrapper {
  position: relative;
  overflow: hidden;
  display: inline-block;

}

.upload-btn-wrapper input[type=file] {
  position: absolute;
  left: 0;
  top: 0;
  opacity: 0;
}

.dropdown2 {
  position: relative;
  display: inline-block;
}

.dropdown-content2 {
  display: none;
  position: absolute;
  background-color: #f9f9f9;
  min-width: 160px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  padding: 12px 16px;
  z-index: 99;
}

.dropdown2:hover .dropdown-content2{
  display: block;
  
}

.cell1
{
text-align:center;
width:35%;
}
.cell2
{
text-align:center;
width:20%;
}
.cell3
{
text-align:center;
width:15%;
}
.cell4
{
text-align:center;
}
input{
outline:none;
background-color:white;
}
select{
outline:none;
}
</style>


</head>


    
<script>  
app.SaveText("Change","index.html");
var themeColor = app.LoadText( "themeColor" );
var color = JSON.parse(themeColor);
var c1=color.c1;
var c2=color.c2;
var c3=color.c3;
var c4=color.c4;
var c5=color.c5;
var c6=color.c6;
var mytheme =app.LoadText( "mytheme" );
if (mytheme=="1")
{
document.getElementById("mystyle").innerHTML = document.getElementById("mystyle").innerHTML+" .fullBody{"
+"background: radial-gradient(ellipse farthest-corner at right bottom, #FEDB37 0%, #FDB931 8%, #9f7928 30%, #8A6E2F 40%, transparent 80%),"
+"radial-gradient(ellipse farthest-corner at left top, #FFFFFF 0%, #FFFFAC 8%, #D1B464 25%, #5d4a1f 62.5%, #5d4a1f 100%);"
+"height:100%;width:100%;margin:0;position:absolute;}"
+".mycontainer{"
+"background: radial-gradient(ellipse farthest-corner at right bottom, #FEDB37 0%, #FDB931 8%, #9f7928 30%, #8A6E2F 40%, transparent 80%) "
+", radial-gradient(ellipse farthest-corner at left top, #FFFFFF 0%, #FFFFAC 8%, #D1B464 25%, #5d4a1f 62.5%, #5d4a1f 100%);"
+"box-shadow:4px 4px 4px #"+c3+",-4px -4px 4px #"+c2+";"
+"font-weight:bold;}"

+".mycontainer2{"
+"position:absolute;"
+"background: radial-gradient(ellipse farthest-corner at right bottom, #FEDB37 0%, #FDB931 8%, #9f7928 30%, #8A6E2F 40%, transparent 80%) "
+", radial-gradient(ellipse farthest-corner at left top, #FFFFFF 0%, #FFFFAC 8%, #D1B464 25%, #5d4a1f 62.5%, #5d4a1f 100%);"
+"box-shadow:4px 4px 4px #"+c3+",-4px -4px 4px #"+c2+";"
+"font-weight:bold;}"
+".myinput{"
+"position:relative;"
+"border:none;"
+"background:#"+c1+";"
+"outline:none;"
+"box-shadow:inset 5px 5px 5px #"+c3+", inset -5px -5px 5px #"+c2+";"
+"}"
+".myinput2{"
+"border:none;"
+"background:#"+c1+";"
+"outline:none;"
+"box-shadow:inset 2px 2px 2px #"+c3+", inset -2px -2px 2px #"+c2+";"
+"}"
+".mybutton{"
+"border:none;"
+"box-shadow:5px 5px 5px #"+c3+", -5px -5px 5px #"+c2+";"
+"outline:none;"
+"background: radial-gradient(ellipse farthest-corner at right bottom, #FEDB37 0%, #FDB931 8%, #9f7928 30%, #8A6E2F 40%, transparent 80%) "
+", radial-gradient(ellipse farthest-corner at left top, #FFFFFF 0%, #FFFFAC 8%, #D1B464 25%, #5d4a1f 62.5%, #5d4a1f 100%);"
+"font-weight:bold;font-family:times;}"
+".mybutton:hover{"
+"box-shadow:1px 1px 5px #"+c3+",  -1px -1px 5px #"+c2+";"
+"}"
+".FAA{color:#"+app.LoadText("fontA")+";}"
+".FB{color:#"+app.LoadText("fontB")+";}"
+".FC{color:#"+app.LoadText("fontC")+";}";
var size=app.LoadText("size").split(",");
for (i = 0; i < size.length; i++) {
document.getElementById("mystyle").innerHTML = document.getElementById("mystyle").innerHTML+" .F"+i+"{font-size:"+size[i]+"px;} ";
}
}
else
{
document.getElementById("mystyle").innerHTML = document.getElementById("mystyle").innerHTML+" body{"
+"background:#"+c1+";"
+"}"
+".mycontainer{"
+"background:#"+c1+";"
+"box-shadow:4px 4px 4px #"+c3+",-4px -4px 4px #"+c2+";"
+"}"
+".mycontainer2{"
+"background:#"+c1+";"
+"box-shadow:4px 4px 4px #"+c3+",-4px -4px 4px #"+c2+";"
+"}"
+".myinput{"
+"position:relative;"
+"border:none;"
+"background:#E6E6E6;"
+"outline:none;"
+"box-shadow:inset 5px 5px 5px #"+c3+", inset -5px -5px 5px #"+c2+";"
+"}"
+".mytext{text-shadow: 2px 2px 2px #"+c3+", -2px -2px 2px #"+c2+";}"
+".mytext2{text-shadow: 1px 1px 1px #"+c3+", -1px -1px 1px #"+c2+";}"
+".myinput2{"
+"border:none;"
+"background:#E6E6E6;"
+"outline:none;"
+"box-shadow:inset 2px 2px 2px #"+c3+", inset -2px -2px 2px #"+c2+";"
+"}"
+".mybutton{"
+"border:none;"
+"box-shadow:5px 5px 5px #"+c3+", -5px -5px 5px #"+c2+";"
+"outline:none;"
+"background:#"+c1+"; " 
+"}"
+".mybutton:hover{"
+"box-shadow:1px 1px 5px #"+c3+",  -1px -1px 5px #"+c2+";"
+"}"
+".FAA{color:#"+app.LoadText("fontA")+";}"
+".FB{color:#"+app.LoadText("fontB")+";}"
+".FC{color:#"+app.LoadText("fontC")+";}";
var size=app.LoadText("size").split(",");
for (i = 0; i < size.length; i++) {
document.getElementById("mystyle").innerHTML = document.getElementById("mystyle").innerHTML+" .F"+i+"{font-size:"+size[i]+"px;} ";
}
}

//app.Alert(document.getElementById("mystyle").innerHTML);
</script>

<body align="center" style="overflow: hidden;" ondragstart="return false" onselectstart="return false">
<div class="fullBody" >
<br>
 
    <select onchange="myproject()" class="F15 FAA mycontainer"  style="font-weight:bold;font-family:times;width:94%;margin-left:3%;height:25px;outline:none;border:1px solid black;;" id="project">
    
    </select>
    
<p style="height:4px;">
	<table class="F10" style="width:94%;margin-left:3%;"><tr>
	<td style="width:25%;text-align:center;"><strong id="a1">Dashboard</strong><button id="a2"onclick="dashboard();" type="button" class="mybutton" style="width:90%;height:20px;display:none;">Dashboard</button></td>
	<td style="width:25%;text-align:center;"><strong id="b1" style="display:none;">Issue list</strong><button id="b2"onclick="issue();" type="button" class="mybutton" style="width:90%;height:20px;" >Issue Iist</button></td>
	<td style="width:25%;text-align:center;"><strong id="c1" style="display:none;">Stock List</strong><button id="c2"onclick="stock();" type="button" class="mybutton" style="width:90%;height:20px;">Stock list</button></td>
  <td style="width:25%;text-align:center;"><strong id="d1" style="display:none;">Manage item</strong><button id="d2"onclick="item();" type="button" class="mybutton" style="width:90%;height:20px;">Manage item</button></td>
		</tr>
	</table>
	
			<div id="d" style="width:100%;height:80%;">
				<iframe class="" id="gk" style="width:100%;height:90%;overflow-x:hidden;outline:none;" src=""></iframe>
			</div>
	
		<div id="i" style="display:none;width:100%;height:90%;">
	<br>
	<table class="F12" style="width:90%;margin-left:5%;font-weight:bold;font-family:times;">
	<tr>
		<td style="width:33%;text-align:center;height:20px;"><strong id="m1">Issue List</strong><button  id="m2" type="button" class="F10 mybutton" style="width:90%;height:20px;display:none;" onclick="issuelist();"  >Issue List</button></td>
		<td style="width:34%;text-align:center;"><button id="n2" type="button" class="F10 mybutton" style="width:90%;height:20px;" data-toggle="modal" data-target="#issue" onclick="issuenon();">Issue for non project</button></td>
		<td style="width:33%;text-align:center;"><strong id="o1" style="display:none;">Issue for project</strong><button id="o2"  type="button" class="F10 mybutton" style="width:90%;height:20px;" onclick="issuep();">Issue for project</button></td>
	</tr>
	</table>
	
	<div id="pk" style="display:none;">
	<table style="width:96%;margin:2%;" >
<tr>
<td style="width:30%;"><select class="mycontainer F13" id="wing"  onchange="wingchange()" style="outline:none;border:1px solid black;width:96%;margin-left:2%;height:20px;font-family:times;font-weight:bold;" >

</select></td>
<td style="width:70%;"><select class="mycontainer F13" id="emp" onchange="empchange()"  style="outline:none;border:1px solid black;width:96%;margin-left:2%;height:20px;font-family:times;font-weight:bold;" >

</select></td>
</tr>
</table>
</div>
	<div id="g2" >
	<iframe class="" id="g" style="width:100%;height:90%;overflow-x:hidden;outline:none;" src=""></iframe>

	</div>
	</div>
	
	
	
	<div id="s" style="display:none;width:100%;height:80%;">
	<br>
	<table class="F12" style="width:90%;margin-left:5%;font-weight:bold;font-family:times;">
	<tr>
	<td style="text-align:left;">Recieving stock list</td>
		<td style="width:25%;text-align:center;"><button type="button" class="F12 mybutton" style="width:90%;height:20px;" data-toggle="modal" data-target="#updatep" onclick="mymodal()"  >Add Stock</button></td>
	</tr>
	</table>
	
	<div id="h2" style="height:400px;overflow:scroll;">
	
	<iframe class="" id="h" style="width:100%;height:90%;overflow-x:hidden;outline:none;" src=""></iframe>

 </div>
	</div>
	
	
		<div id="t" style="display:none;width:100%;height:80%;">
	<br>
	<table class="F16" style="width:90%;margin-left:5%;font-weight:bold;font-family:times;">
	<tr>
	<td style="text-align:left;">Item name</td>
		<td style="width:25%;text-align:center;"><button type="button" class="F12 mybutton" style="width:90%;height:20px;" data-toggle="modal" data-target="#newitem">Add New item</button></td>
	</tr>
	</table>
	
	<div style="height:400px;overflow:scroll;" id="item">

	
	</div>
	</div>
	
	
		<div class="modal fade" id="newitem" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content mycontainer">
      <div class="modal-header">
        <h5 class="modal-title F16" id="exampleModalLabel" style="font-weight:bold;font-family:times;">Add new item name</h5>
      </div>
      <div class="modal-body">

<div class="container" style="margin-top:10px;">
<p class="F12 FAA" style="text-align:left;font-weight:bold;">Item name<strong style="color:red"></strong></p>    
  <div class=" myinput" style="">
 <input class="F12 FAA" type="text" style="height:30px;"placeholder="item name" id="iname">
  </div>
</div>

<div class="container" style="margin-top:10px;">
<p class="F12 FAA" style="text-align:left;font-weight:bold;">Select Unit<strong style="color:red"></strong></p>                                        
  <div class=" myinput" style="margin-top:5px;">
    <select  class="F15 FAA mycontainer"   style="width:100%;height:35px;outline:none;border:none;" id="uname">
  <option value="BAG">BAG</option>
  <option value="BKT">BKT</option>
  <option value="KG">KG</option>
  <option value="LTR">LTR</option>
  <option value="NOS">NOS</option>
  <option value="BOX">BOX</option>
  <option value="PCS">PCS</option>
  <option value="MTR">MTR</option>
  <option value="FEET">FEET</option>
  <option value="INCH">INCH</option>
  <option value="BNDL">BNDL</option>
  <option value="ROLL">ROLL</option>
  <option value="BTL">BTL</option>
    </select>
  </div>
</div>

      </div>
      <div class="modal-footer">
       <button type="button" class="mybutton" data-dismiss="modal">Close</button>
        <button type="button" class="mybutton" onclick="additem();">Add item</button>
      
      </div>
    </div>
  </div>
</div>


		<div class="modal fade" id="updateitem" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content mycontainer">
      <div class="modal-header">
        <h5 class="modal-title F16" id="exampleModalLabel" style="font-weight:bold;font-family:times;">Update item name</h5>
      </div>
      <div class="modal-body">

<div class="container" style="margin-top:10px;">
<p class="F12 FAA" style="text-align:left;font-weight:bold;">Item name<strong style="color:red"></strong></p>    
  <div class=" myinput" style="">
 <input class="F12 FAA" type="text" style="height:30px;"placeholder="item name" id="inamez">
  </div>
</div>

<div class="container" style="margin-top:10px;">
<p class="F12 FAA" style="text-align:left;font-weight:bold;">Select Unit<strong style="color:red"></strong></p>                                        
  <div class=" myinput" style="margin-top:5px;">
    <select  class="F15 FAA mycontainer"   style="width:100%;height:35px;outline:none;border:none;" id="unamez">
  <option value="BAG">BAG</option>
  <option value="BKT">BKT</option>
  <option value="KG">KG</option>
  <option value="LTR">LTR</option>
  <option value="NOS">NOS</option>
  <option value="BOX">BOX</option>
  <option value="PCS">PCS</option>
  <option value="MTR">MTR</option>
  <option value="FEET">FEET</option>
  <option value="INCH">INCH</option>
  <option value="BNDL">BNDL</option>
  <option value="ROLL">ROLL</option>
  <option value="BTL">BTL</option>
    </select>
  </div>
</div>
<input type="hidden" id="idz">
      </div>
      <div class="modal-footer">
       <button type="button" class="mybutton" data-dismiss="modal">Close</button>
        <button type="button" class="mybutton" onclick="updateitem()">Update item</button>
      
      </div>
    </div>
  </div>
</div>
		
	<div class="modal fade" id="issue" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content mycontainer">
      <div class="modal-header">
        <h5 class="modal-title F16" id="exampleModalLabel" style="font-weight:bold;font-family:times;">Issue Materials</h5>
      </div>
      <div class="modal-body" style="margin:0px;">


<div class="container" style="margin-top:10px;">
<p class="F12 FAA" style="text-align:left;font-weight:bold;">Select Employee<strong style="color:red"></strong></p>                                        
  <div class=" myinput" style="margin-top:5px;">
    <select  class="F15 FAA mybutton"   style="width:100%;height:25px;outline:none;border:none;" id="pemp">
   
    </select>
  </div>
</div>
<br>
<table id="myTablex" class ="F10" style="width:100%" border="1">

</table>



	<div class="container" style="margin-top:10px;">
<p class="F12 FAA" style="text-align:left;font-weight:bold;">Remarks<strong style="color:red"></strong></p>                                        
  <div class=" myinput" style="margin-top:5px;">
    <textarea class="F15 FAA myinput"  placeholder="Remark"style="width:100%;height:70px;background-color:white;"  id="remarks"></textarea>
  </div>
</div>

      </div>
      <div class="modal-footer">
       <button type="button" class="mybutton" data-dismiss="modal">Close</button>
        <button type="button" class="mybutton" onclick="issuematerial();" >Issue Material</button>
      
      </div>
    </div>
  </div>
</div>
	
	
	
	<div class="modal fade" id="updatep" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content mycontainer">
      <div class="modal-header">
        <h5 class="modal-title F16" id="exampleModalLabel" style="font-weight:bold;font-family:times;">Add stock</h5>
      </div>
      <div class="modal-body">
      
<div class="container" style="margin-top:10px;">
<p class="F12 FAA" style="text-align:left;font-weight:bold;">Party Name<strong style="color:red"></strong></p>    
  <div class=" myinput" style="">
 <input class="F12 FAA myinput" type="text" style="height:30px;"placeholder="Party name " id="xdealer">
  </div>
</div>

<div class="container" style="margin-top:10px;">
<p class="F12 FAA" style="text-align:left;font-weight:bold;">Challan no<strong style="color:red"></strong></p>    
  <div class=" myinput" style="">
 <input class="F12 FAA myinput" type="text" style="height:30px;"placeholder="Challan no" id="xchallan">
  </div>
</div>

<div class="container" style="margin-top:10px;">
<p class="F12 FAA" style="text-align:left;font-weight:bold;">Date<strong style="color:red">*</strong></p>    
  <div class=" myinput" style="">
 <input class="F12 FAA mybutton" type="date" style="height:30px;" id="xdate">
  </div>
</div>

<p>Material list</p>
<table id="myTable" class="F12"  style="width:100%" border="1" >

</table>
<br>

      </div>
      <div class="modal-footer">
        <button type="button" class="mybutton" data-dismiss="modal">Close</button>
      <button type="button" class="mybutton" style="width:70px;" onclick="addstock();">Submit</button>
      </div>
    </div>
  </div>
</div>

<script>
var  rec = JSON.parse(app.LoadText( "userDetails" ));
       var    id=rec.id;
       var    User=rec.user;
       var   token=rec.token;
        var  uid =rec.uid;
       var  url = app.LoadText( "url" );
       var	mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
       var letters = /^[A-Z a-z 0-9]+$/;
       var iid =0;
       var myitemx ="";
       var mydata ="";
       var row =1;
       var data ="";
       var  issueid =0;



var height=window.innerHeight-90;
document.getElementById("gk").style="height:"+height+"px;width:100%;overflow:scroll;";
document.getElementById("g2").style="height:"+height+"px;overflow:scroll;";
document.getElementById("h2").style="height:"+height+"px;overflow:scroll;";
document.getElementById("item").style="height:"+height+"px;overflow:scroll;";


	var reqdata1=0;
  var  reqdata2 =0;
  var  reqdata3 =0;
   var  reqdata4 =0;
window.onmessage = function(e) {

if("delete"==((e.data).substr(0, 6)))
{
data =  e.data.replace("delete", "");
  yndB= app.CreateYesNoDialog( "Are you want to delete this stock" );
    yndB.SetOnTouch( YndB_OnTouch );
    yndB.Show();
}
else if("dld"==((e.data).substr(0, 3)))
{
var jsond =data =  e.data.replace("dld", "");
       var  reqg = JSON.parse(jsond);
       var    dldurl =reqg.url;
       var fn =reqg.name;
      var fldr = "/sdcard/Download/";
    app.MakeFolder( fldr )
    dload = app.CreateDownloader( /*"NoDialog"*/ )
    dload.SetOnDownload( dload_OnDownload )
    dload.SetOnError( dload_OnError )
    dload.Download( dldurl, fldr,fn)


}
else if("ggg"==((e.data).substr(0, 3)))
{
  issueid =e.data.replace("ggg", "");
  yndD= app.CreateYesNoDialog( "Are you want to delete this issued" );
    yndD.SetOnTouch( YndD_OnTouch );
    yndD.Show();
}
else if("hhh"==((e.data).substr(0, 3)))
{
  issueid2 =e.data.replace("hhh", "");
  yndE= app.CreateYesNoDialog( "Are you want to delete this issued" );
    yndE.SetOnTouch( YndE_OnTouch );
    yndE.Show();
}
else
{
  var table = document.getElementById("myTable");
  
         table.innerHTML="";
        var rowx = table.insertRow(0);
        var cell = rowx.insertCell(0);
             cell.innerHTML= '<button class="mybutton" onclick="myCreate()">Add more row</button>';
             cell.colSpan = 5;
             cell.style="text-align:right;";
          var rowx = table.insertRow(1);


var cell1 = rowx.insertCell(0);
var cell2 = rowx.insertCell(1);
var cell3 = rowx.insertCell(2);
var cell4 = rowx.insertCell(3);
var cell5 = rowx.insertCell(4);
cell1.innerHTML = "Item Name";
cell2.innerHTML = "Quantity";
cell3.innerHTML = "Unit";
cell4.innerHTML = "Amount";
  cell1.className ="cell1";
  cell2.className ="cell2";
  cell3.className ="cell3";
  cell4.className ="cell2";
  cell2.className ="cell4";

row=1;
   var edata =e.data.split('@');
          //edata = edata.reverse();
          
   for(var v = 0; v < edata.length ;  v++)
   {

       var  req = JSON.parse(edata[v]);
       var    reqid =req.id;
         reqdata1 =req.item;
         reqdata2 =req.quantity;
        reqdata3 =req.unit;
        reqdata4 =req.amount;
        if(v ==0)
        {
        document.getElementById("xdealer").value= reqdata1;
        document.getElementById("xchallan").value=reqdata2;
        document.getElementById("xdate").value=reqdata3;
        }
        else
        {
        row =row+1;
          var rowx = table.insertRow(row);
          rowx.id = "p"+reqid;
          
  var cell1 = rowx.insertCell(0).innerHTML= '<select id="m'+reqid+'" class="myitem mybutton" value="'+reqdata1+'"style="width:95%;height:20px;" disabled>'
  +myitemx+'</select>';
  document.getElementById("m"+reqid).value=reqdata1;
  var cell2 = rowx.insertCell(1).innerHTML='<input placeholder="0.00" value="'+reqdata2+'" class="myquantity myinput" type="number" style="width:90%;height:20px;">';
  var cell3 = rowx.insertCell(2).innerHTML= '<select id="f'+reqid+'" value="'+reqdata3+'" class="myunit mybutton" style="width:95%;height:20px;">'
  +'<option value="BAG">BAG</option>'
  +'<option value="BKT">BKT</option>'
  +'<option value="KG">KG</option>'
  +'<option value="LTR">LTR</option>'
  +'<option value="NOS">NOS</option>'
  +'<option value="BOX">BOX</option>'
  +'<option value="PCS">PCS</option>'
  +'<option value="MTR">MTR</option>'
  +'<option value="FEET">FEET</option>'
  +'<option value="INCH">INCH</option>'
  +'<option value="BNDL">BNDL</option>'
  +'<option value="ROLL">ROLL</option>'
  +'<option value="BTL">BTL</option></select>';
    document.getElementById("f"+reqid).value=reqdata3;
  var cell4 = rowx.insertCell(3).innerHTML='<input placeholder="0.00" value="'+reqdata4+'" class="myamount myinput" type="number" style="width:90%;height:20px;">';
  var cell5 = rowx.insertCell(4).innerHTML='<input type="hidden" value="'+reqid+'" class="myid"><button class="mybutton" id="dd'+reqid+'" data="m" style="height:20px;color:red;"onclick="myDelete('+reqid+')"><i class="fa fa-trash F13"></i></button>';
  cell1.className ="cell1";
  cell2.className ="cell2";
  cell3.className ="cell3";
  cell4.className ="cell2";
  cell2.className ="cell4";
}}           
$('#updatep').modal('show');
}
}           


function dload_OnDownload( fileg )
{
app.ShowPopup( "File downloaded in Download folder" );
	app.OpenFile( fileg,"application/pdf");
	
}

function YndD_OnTouch(pp)
{
if(pp="Yes")
{

	var 	req19=new XMLHttpRequest();
	req19.open("GET",app.LoadText( "url" )+"deleteissue.php?id="+id+"&user="+User+"&ref="+issueid+"&token="+token,true);
	req19.onreadystatechange=function(){
if(	req19.readyState==4 && 	req19.status==200){if(	req19.responseText=="ufFygf")
{  

}else{
document.getElementById("g").contentWindow.postMessage(  issueid  , '*');
}}}
	req19.send();
}
}


function YndE_OnTouch(pp)
{
if(pp="Yes")
{
	var 	req20=new XMLHttpRequest();
	req20.open("GET",app.LoadText( "url" )+"deleteissue2.php?id="+id+"&user="+User+"&ref="+issueid2+"&token="+token,true);
	req20.onreadystatechange=function(){
if(	req20.readyState==4 && 	req20.status==200){if(	req20.responseText=="ufFygf")
{  

}else{
document.getElementById("g").contentWindow.postMessage(  issueid2  , '*');
}}}
	req20.send();
	
}
}
//Handle download errors.
function dload_OnError( error )
{
	app.ShowPopup( "Download failed: " + error )
}



function mymodal()
{
        document.getElementById("xdealer").value= "";
        document.getElementById("xchallan").value="";
        document.getElementById("xdate").value="";
        
  var table = document.getElementById("myTable");
         table.innerHTML="";
        var rowx = table.insertRow(0);
        var cell = rowx.insertCell(0);
             cell.innerHTML= '<button class="mybutton" onclick="myCreate()">Add more row</button>';
             cell.colSpan = 5;
             cell.style="text-align:right;";
          var rowx = table.insertRow(1);


var cell1 = rowx.insertCell(0);
var cell2 = rowx.insertCell(1);
var cell3 = rowx.insertCell(2);
var cell4 = rowx.insertCell(3);
var cell5 = rowx.insertCell(4);
cell1.innerHTML = "Item Name";
cell2.innerHTML = "Quantity";
cell3.innerHTML = "Unit";
cell4.innerHTML = "Amount";
  cell1.className ="cell1";
  cell2.className ="cell2";
  cell3.className ="cell3";
  cell4.className ="cell2";
  cell2.className ="cell4";
          
row=1;
          myCreate();
}


var rowz =1;
function mycreatex() {




    rowz=rowz+1;
  var tablez = document.getElementById("myTablex");
  var rowm = tablez.insertRow(rowz);
  var cellz1 = rowm.insertCell(0).innerHTML= '<select onchange="checkstock('+rowz+')" id="stockcheck'+rowz+'" class="myitemx mybutton" style="width:100%;height:20px;">'
  +'<option value="Select item">Select item</option>'
  +myitemx+'</select>'
  var cellz2 = rowm.insertCell(1).innerHTML='<input class="myquantityx myinput" id="op'+rowz+'" onchange="recheck('+rowz+')"  type="number" placeholder="0.00" style="width:90%;height:20px;">';
  var cellz3 = rowm.insertCell(2).innerHTML= '<select class="myunitx mybutton" style="width:100%;height:20px;">'
  
  +'<option>BAG</option>'
  +'<option>BKT</option>'
  +'<option>KG</option>'
  +'<option>LTR</option>'
  +'<option>NOS</option>'
  +'<option>BKT</option>'
  +'<option>BOX</option>'
  +'<option>PCS</option>'
  +'<option>MTR</option>'
  +'<option>FEET</option>'
  +'<option>INCH</option>'
  +'<option>BNDL</option>'
  +'<option>Role</option>'
  +'<option>BTL</option></select>';
  
  var cell8 = rowm.insertCell(3);
        cell8.innerHTML= '';
        cell8.id ="stockvalue"+rowz;
  var cellz5 = rowm.insertCell(4).innerHTML='<i class="F18 mybutton fa fa-trash" onclick="myDeletex('+rowz+')"></i>';
  cellz2.className ="cell2";
  cellz3.className ="cell3";
  cellz2.className ="cell4";
}
function recheck(H)
{
var issuevalue = document.getElementById("op"+H).value;
var stockvalue = document.getElementById("stockvalue"+H).innerHTML;
if (issuevalue>= stockvalue)
{
document.getElementById("op"+H).value=stockvalue;
}
}
function checkstock(M)
{
var itemG =   document.getElementById("stockcheck"+M).value;
var project =document.getElementById("project").value ;
	var 	req18=new XMLHttpRequest();
	req18.open("GET",app.LoadText( "url" )+"getstock.php?id="+id+"&user="+User+"&item="+itemG+"&project="+project+"&token="+token,true);
	req18.onreadystatechange=function(){
if(	req18.readyState==4 && 	req18.status==200){if(	req18.responseText=="ufFygf")
{  

}else{
 document.getElementById("stockvalue"+M).innerHTML= req18.responseText.trim();
}}}
	req18.send();


}





function myDeletex(N) {
  document.getElementById("myTablex").deleteRow(rowz);
  rowz=rowz-1;
}

var mydatax ="";
function getdatax()
{
mydatax ="";
var myitemx =document.getElementsByClassName("myitemx");
var myquantityx =document.getElementsByClassName("myquantityx");
var myunitx =document.getElementsByClassName("myunitx");
for (i = 0; i < myitemx.length; i++){
   if(myquantityx[i].value.length !=0)
   {
   if(i==0)
   {
   mydatax+= '{ "item":"'+myitemx[i].value+'","quantity":"'+myquantityx[i].value+'","unit":"'+myunitx[i].value+'"}';
    }
    else
    {
    mydatax+= '@{"item":"'+myitemx[i].value+'","quantity":"'+myquantityx[i].value+'","unit":"'+myunitx[i].value+'"}';
    }
    }
}

}

function issuematerial()
{
getdatax();
var project =document.getElementById("project").value ;
var pemp =document.getElementById("pemp").value ;
var remarks =document.getElementById("remarks").value ;

if(remarks.length<3)
{
app.Alert( "Please input remark" );
}
else if(remarks.match(letters))
{

app.Execute("loader2(1);");   
	var 	req16=new XMLHttpRequest();
	req16.open("GET",app.LoadText( "url" )+"addissue.php?id="+id+"&user="+User+"&remark="+remarks+"&emp="+pemp+"&project="+project+"&data="+mydatax+"&token="+token,true);
	req16.onreadystatechange=function(){
if(	req16.readyState==4 && 	req16.status==200){if(	req16.responseText=="ufFygf")
{  

}else{
 if (req16.responseText.trim()==1)
 {
 app.Alert( "error please relogin" );
     app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Error"}');
 }
 
 if(req16.responseText.trim().length>10)
 {
 app.Alert( req16.responseText.trim());
 }
     app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":""}');
   
 issuelist2();
 
}}}
	req16.send();
}
else
{
app.Alert( "Please remove special charactor from remark fields" );
}
}


function workdataload()
{
var project =document.getElementById("project").value ;
var wing =document.getElementById("wing").value ;
var emp =document.getElementById("emp").value ;
document.getElementById("g").src=url+"flatissue.php?id="+id+"&user="+User+"&token="+token+"&project="+project+"&url="+url+"&wing="+wing+"&emp="+emp;
}
function issuelist2()
{
var project =document.getElementById("project").value ;
document.getElementById("g").src=url+"issuelist.php?id="+id+"&user="+User+"&token="+token+"&url="+url+"&project="+project;
      
            var tablez = document.getElementById("myTablex");
         tablez.innerHTML="";
        var rowx = tablez.insertRow(0);
        var cell = rowx.insertCell(0);
             cell.innerHTML= '<button class="mybutton" onclick="mycreatex()">Add more row</button>';
             cell.colSpan = 5;
             cell.style="text-align:right;";
          var rowx = tablez.insertRow(1);


var cell1 = rowx.insertCell(0);
var cellz2 = rowx.insertCell(1);
var cellz3 = rowx.insertCell(2);
var cellz4 = rowx.insertCell(3).innerHTML = "stock";

cell1.innerHTML = "Item Name";
cellz2.innerHTML = "Quantity";
cellz3.innerHTML = "Unit";
  cellz2.className ="cell2";
  cellz3.className ="cell3";
  cellz4.className ="cell4";
  rowz =1;
   mycreatex();
}

function stockload()
{
var project =document.getElementById("project").value ;
document.getElementById("h").src=url+"stocklist.php?id="+id+"&user="+User+"&token="+token+"&url="+url+"&project="+project;
}
function myproject()
{
dashboard();
getwing();
getemp();
}
function wingchange()
{
workdataload();
}

function empchange()
{
workdataload();
}
function issuelist()
{
document.getElementById("pk").style.display="none";
document.getElementById("m1").style.display="block";
document.getElementById("m2").style.display="none";
document.getElementById("o1").style.display="none";
document.getElementById("o2").style.display="block";
issuelist2();
}


function issuenon()
{
document.getElementById("pk").style.display="none";
document.getElementById("m1").style.display="block";
document.getElementById("m2").style.display="none";
document.getElementById("o1").style.display="none";
document.getElementById("o2").style.display="block";
issuelist2();
}


function issuep()
{
document.getElementById("pk").style.display="block";
document.getElementById("m1").style.display="none";
document.getElementById("m2").style.display="block";
document.getElementById("o1").style.display="block";
document.getElementById("o2").style.display="none";
workdataload();
}

function stock()
{
document.getElementById("t").style.display="none";
document.getElementById("d").style.display="none";
document.getElementById("i").style.display="none";
document.getElementById("s").style.display="block";

document.getElementById("a1").style.display="none";
document.getElementById("a2").style.display="block";
document.getElementById("b1").style.display="none";
document.getElementById("b2").style.display="block";
document.getElementById("c1").style.display="block";
document.getElementById("c2").style.display="none";

document.getElementById("d1").style.display="none";
document.getElementById("d2").style.display="block";
stockload();
getitemname();


}
function issue()
{
document.getElementById("d").style.display="none";
document.getElementById("i").style.display="block";
document.getElementById("s").style.display="none";
document.getElementById("t").style.display="none";

document.getElementById("a1").style.display="none";
document.getElementById("a2").style.display="block";
document.getElementById("b1").style.display="block";
document.getElementById("b2").style.display="none";
document.getElementById("c1").style.display="none";
document.getElementById("c2").style.display="block";
document.getElementById("d1").style.display="none";
document.getElementById("d2").style.display="block";
getitemname();
issuelist();
}
function dashboard()
{
document.getElementById("d").style.display="block";
document.getElementById("i").style.display="none";
document.getElementById("s").style.display="none";
document.getElementById("t").style.display="none";

document.getElementById("a1").style.display="block";
document.getElementById("a2").style.display="none";
document.getElementById("b1").style.display="none";
document.getElementById("b2").style.display="block";
document.getElementById("c1").style.display="none";
document.getElementById("c2").style.display="block";
document.getElementById("d1").style.display="none";
document.getElementById("d2").style.display="block";

var project =document.getElementById("project").value ;
document.getElementById("gk").src=url+"stockinfo.php?id="+id+"&user="+User+"&token="+token+"&project="+project;

}
function item()
{
document.getElementById("d").style.display="none";
document.getElementById("i").style.display="none";
document.getElementById("s").style.display="none";
document.getElementById("t").style.display="block";

document.getElementById("a1").style.display="none";
document.getElementById("a2").style.display="block";
document.getElementById("b1").style.display="none";
document.getElementById("b2").style.display="block";
document.getElementById("c1").style.display="none";
document.getElementById("c2").style.display="block";
document.getElementById("d1").style.display="block";
document.getElementById("d2").style.display="none";

}
function addstock()
{
var project =document.getElementById("project").value ;
var xdealer =document.getElementById("xdealer").value;
var xchallan =document.getElementById("xchallan").value;
var xdate =document.getElementById("xdate").value;
getdata();

if(xdealer.length==0)
{
   app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Please input party name"}');
}
else if(xdealer.match(letters))
{
if (xchallan.length==0)
{
   app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Please input challan no"}');
}
else if(xchallan.match(letters))
{
if(xdate.length==0)
{
   app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Please select date"}');
}
else
{

 app.Execute("loader2(1);");   
	var 	req2=new XMLHttpRequest();
	req2.open("GET",app.LoadText( "url" )+"addstock.php?id="+id+"&user="+User+"&token="+token+"&project="+project+"&dealer="+xdealer+"&challan="+xchallan+"&date="+xdate+"&data="+mydata,true);
	req2.onreadystatechange=function(){
if(	req2.readyState==4 && 	req2.status==200){if(	req2.responseText=="ufFygf")
{  

}else{
 if (req2.responseText.trim()==1)
 {
 app.Alert( "error please relogin" );
     app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Error"}');
     app.ClearData(  );
  app.exit();
 }
 else if(req2.responseText.trim()==2)
 {
  app.Alert( "User is blocked" );
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"User is blocked"}');
 }
 else if(req2.responseText.trim()==3)
 {
  app.Alert( "Permission denied contact admin" );
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Permission denied"}');
 }
  else if(req2.responseText.trim()==4)
 {
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Already exist this item name"}');
 }
 else if(req2.responseText.trim()==5)
 {
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"green","msg":"Seccessfully added"}');
   stockload();
 }
 else
 {
      app.SaveText("msg",'{"color":"green","msg":""}');
  app.Execute("loader2(4);");   

 }
}}}
	req2.send();
	
}
}
else
{
app.Alert( "Please remove special charactor in the challan no" );
}
}
else
{
app.Alert( "Please remove special charactor in the party name" );
}
}





var mm=0;

function myCreate() {
mm=mm+1;
    row=row+1;
  var table = document.getElementById("myTable");
  var rowx= table.insertRow(row);
  rowx.id = "p"+mm;
  var cell1 = rowx.insertCell(0).innerHTML= '<select class="myitem mybutton" style="width:95%;height:20px;">'
  +myitemx+'</select>';
  var cell2 = rowx.insertCell(1).innerHTML='<input placeholder="0.00" class="myquantity myinput" type="number" style="width:90%;height:20px;">';
  var cell3 = rowx.insertCell(2).innerHTML= '<select class="myunit mybutton" style="width:95%;height:20px;">'
  +'<option value="BAG">BAG</option>'
  +'<option value="BKT">BKT</option>'
  +'<option value="KG">KG</option>'
  +'<option value="LTR">LTR</option>'
  +'<option value="NOS">NOS</option>'
  +'<option value="BOX">BOX</option>'
  +'<option value="PCS">PCS</option>'
  +'<option value="MTR">MTR</option>'
  +'<option value="FEET">FEET</option>'
  +'<option value="INCH">INCH</option>'
  +'<option value="BNDL">BNDL</option>'
  +'<option value="ROLL">ROLL</option>'
  +'<option value="BTL">BTL</option></select>';
  var cell4 = rowx.insertCell(3).innerHTML='<input placeholder="0.00" class="myamount myinput" type="number" style="width:90%;height:20px;">';
  
  var cell5 = rowx.insertCell(4).innerHTML='<input type="hidden" value="" class="myid"><button id="dd'+mm+'" data="n"  class="mybutton" style="height:20px;color:red;"onclick="myDelete('+mm+')"><i class="fa fa-trash F13"></i></button>';
  cell1.className ="cell1";
  cell2.className ="cell2";
  cell3.className ="cell3";
  cell4.className ="cell2";
  cell2.className ="cell4";
}
var dataB ="";

function myDelete(N) {
var delif =document.getElementById("dd"+N).getAttribute("data");
if(delif=="m")
{
dataB =N;
  yndC= app.CreateYesNoDialog( "Are you want to delete this stock" );
    yndC.SetOnTouch( YndC_OnTouch );
    yndC.Show();
}
else
{
   var rowb= document.getElementById("p"+N);
    rowb.parentNode.removeChild(rowb);
  row=row-1;
}
}

function YndC_OnTouch(result)
{
if(result=="Yes")
{
app.Execute("loader2(1);");   
	var 	req15=new XMLHttpRequest();
	req15.open("GET",app.LoadText( "url" )+"deletestock.php?id="+id+"&user="+User+"&data="+dataB+"&token="+token,true);
	req15.onreadystatechange=function(){
if(	req15.readyState==4 && 	req15.status==200){if(	req15.responseText=="ufFygf")
{  

}else{
 if (req15.responseText.trim()==1)
 {
 app.Alert( "error please relogin" );
     app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Error"}');
 }
 
     app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":""}');
   
   var rowb= document.getElementById("p"+dataB);
    rowb.parentNode.removeChild(rowb);
  row=row-1;
stockload();
}}}
	req15.send();
}
}

function YndB_OnTouch(result)
{
if(result=="Yes")
{
app.Execute("loader2(1);");   
	var 	req15=new XMLHttpRequest();
	req15.open("GET",app.LoadText( "url" )+"deletestock.php?id="+id+"&user="+User+"&data="+data+"&token="+token,true);
	req15.onreadystatechange=function(){
if(	req15.readyState==4 && 	req15.status==200){if(	req15.responseText=="ufFygf")
{  

}else{
 if (req15.responseText.trim()==1)
 {
 app.Alert( "error please relogin" );
     app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Error"}');
 }
 
     app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":""}');

stockload();
}}}
	req15.send();
}
}

function getdata()
{
mydata ="";
var myitem =document.getElementsByClassName("myitem");
var myquantity =document.getElementsByClassName("myquantity");
var myunit =document.getElementsByClassName("myunit");
var myamount =document.getElementsByClassName("myamount");
var myid =document.getElementsByClassName("myid");
for (i = 0; i < myitem.length; i++){
   if(myquantity[i].value.length !=0)
   {
   if(i==0)
   {
   mydata+= '{ "item":"'+myitem[i].value+'","quantity":"'+myquantity[i].value+'","unit":"'+myunit[i].value+'","amount":"'+myamount[i].value+'", "id":"'+myid[i].value+'"}';
    }
    else
    {
    mydata+= '@{"item":"'+myitem[i].value+'","quantity":"'+myquantity[i].value+'","unit":"'+myunit[i].value+'","amount":"'+myamount[i].value+'", "id":"'+myid[i].value+'"}';
    }
    }
}
}





function additem()
{
var iname =document.getElementById("iname").value;
var uname =document.getElementById("uname").value;

 if (iname.length<1)
{
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Please input item name field"}');
}
else if (iname.match(letters))
{

 app.Execute("loader2(1);");   
	var 	req2=new XMLHttpRequest();
	req2.open("GET",app.LoadText( "url" )+"additem.php?id="+id+"&user="+User+"&token="+token+"&iname="+iname+"&uname="+uname,true);
	req2.onreadystatechange=function(){
if(	req2.readyState==4 && 	req2.status==200){if(	req2.responseText=="ufFygf")
{  

}else{
 if (req2.responseText.trim()==1)
 {
 app.Alert( "error please relogin" );
     app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Error"}');
     app.ClearData(  );
  app.exit();
 }
 else if(req2.responseText.trim()==2)
 {
  app.Alert( "User is blocked" );
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"User is blocked"}');
 }
 else if(req2.responseText.trim()==3)
 {
  app.Alert( "Permission denied contact admin" );
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Permission denied"}');
 }
  else if(req2.responseText.trim()==4)
 {
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Already exist this item name"}');
 }
 else if(req2.responseText.trim()==5)
 {
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"green","msg":"Seccessfully added"}');
   getitemname();
 }
 else
 {
      app.SaveText("msg",'{"color":"green","msg":""}');
  app.Execute("loader2(4);");   
getitemname();
 }
}}}
	req2.send();
}
else
{
app.Alert( "Please remove special charactor in item name field" );
}
}

function itemname(z)
{

document.getElementById("inamez").value  =document.getElementById("iname"+z).innerHTML;
document.getElementById("unamez").value =document.getElementById("uname"+z).innerHTML;
document.getElementById("idz").value=z;
}


function updateitem()
{
var iname2 =document.getElementById("inamez").value;
var uname2 =document.getElementById("unamez").value;
var idz =document.getElementById("idz").value;

 if (iname.length<1)
{
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Please input item name field"}');
}
else if (iname2.match(letters))
{

 app.Execute("loader2(1);");   
	var 	req2=new XMLHttpRequest();
	req2.open("GET",app.LoadText( "url" )+"updateitem.php?id="+id+"&user="+User+"&token="+token+"&iid="+idz+"&iname="+iname2+"&uname="+uname2,true);
	req2.onreadystatechange=function(){
if(	req2.readyState==4 && 	req2.status==200){if(	req2.responseText=="ufFygf")
{  

}else{
 if (req2.responseText.trim()==1)
 {
 app.Alert( "error please relogin" );
     app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Error"}');
     app.ClearData(  );
  app.exit();
 }
 else if(req2.responseText.trim()==2)
 {
  app.Alert( "User is blocked" );
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"User is blocked"}');
 }
 else if(req2.responseText.trim()==3)
 {
  app.Alert( "Permission denied contact admin" );
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Permission denied"}');
 }
 
 else
 {
      app.SaveText("msg",'{"color":"green","msg":""}');
  app.Execute("loader2(4);");   
getitemname();
 }
}}}
	req2.send();
}
else
{
app.Alert( "Please remove special charactor in item name field" );
}
}


function deleteitemname(y)
{
   iid =y;
    yndA = app.CreateYesNoDialog( "Are you sure want to delete this item , All data will be deleted with associates this name" );
    yndA.SetOnTouch( YndA_OnTouch );
    yndA.Show();
}

function YndA_OnTouch( result )
{
    if(result=="Yes")
{
var iname3 =document.getElementById("iname"+iid).innerHTML;
 app.Execute("loader2(1);");   
	var 	req2=new XMLHttpRequest();
	req2.open("GET",app.LoadText( "url" )+"deleteitemname.php?id="+id+"&user="+User+"&name="+iname3+"&iid="+iid+"&token="+token,true);
	req2.onreadystatechange=function(){
if(	req2.readyState==4 && 	req2.status==200){if(	req2.responseText=="ufFygf")
{  

}else{
 if (req2.responseText.trim()==1)
 {
 app.Alert( "error please relogin" );
     app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Error"}');
     app.ClearData(  );
  app.exit();
 }
 else if(req2.responseText.trim()==2)
 {
  app.Alert( "User is blocked" );
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"User is blocked"}');
 }
 else if(req2.responseText.trim()==3)
 {
  app.Alert( "Permission denied contact admin" );
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Permission denied"}');
 }
 
 else
 {

 app.SaveText("msg",'{"color":"red","msg":"Seccessfull deleted"}');
  app.Execute("loader2(4);");   
  
getitemname();
 }
}}}
	req2.send();

}
else
{
yndA.Hide();
}

}
var gg =0;
function getitemname()
{
 app.Execute("loader2(1);");   
	var 	req2=new XMLHttpRequest();
	req2.open("GET",app.LoadText( "url" )+"getitemname.php?id="+id+"&user="+User+"&token="+token,true);
	req2.onreadystatechange=function(){
if(	req2.readyState==4 && 	req2.status==200){if(	req2.responseText=="ufFygf")
{  

}else{
 if (req2.responseText.trim()==1)
 {
 app.Alert( "error please relogin" );
     app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Error"}');
     app.ClearData(  );
  app.exit();
 }
 else if(req2.responseText.trim()==2)
 {
  app.Alert( "User is blocked" );
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"User is blocked"}');
 }
 else if(req2.responseText.trim()==3)
 {
  app.Alert( "Permission denied contact admin" );
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Permission denied"}');
 }
 
 else
 {
          document.getElementById("item").innerHTML="";
          myitemx ="";
 app.SaveText("msg",'{"color":"green","msg":""}');
  app.Execute("loader2(4);");   
  
     var projectdata=req2.responseText.trim().split('@');
   for(var i = 0; i < projectdata.length ;  i++)
   {
   if (projectdata[i].length<3)
   {}
   else
   {
   var  rec = JSON.parse(projectdata[i]);
   var  pid=rec.id;
   var  pname=rec.name;
   var  punit=rec.unit;
  
     document.getElementById("item").innerHTML = document.getElementById("item").innerHTML+'		<div class="mycontainer" style="width:90%;margin:5%;">'
+'	<table class="F11" style="width:96%;margin:2%;font-weight:bold;font-family:times;"  class="F15" >'
+'<tr>'
+'<td>1</td>'
+'<td style="text-align:left;" id="iname'+pid+'">'+pname+'</td>'
+'<td style="text-align:center;" id="uname'+pid+'">'+punit+'</td>'
+'<td style="text-align:right;"><i data-toggle="modal" onclick="itemname('+pid+')" data-target="#updateitem" class="fa fa-edit mybutton"></i></td>'
+'<td style="text-align:right;"><i onclick="deleteitemname('+pid+')"class="fa fa-trash mybutton"></i></td>'
+'</tr>'
+'</table>'
+'	</div>';

myitemx = myitemx+'<option value="'+pid+'">'+pname+'</option>';
}}
if(gg==0)
{
gg=1;

}
 }

}}}
	req2.send();

}

	 function getemp()
 {
 var project =document.getElementById("project").value;
// app.Execute("loader2(1);");   
	var 	req4=new XMLHttpRequest();
	req4.open("GET",app.LoadText( "url" )+"projectemp.php?id="+id+"&user="+User+"&project="+project+"&token="+token,true);
		req4.onreadystatechange=function(){
if(	req4.readyState==4 && 	req4.status==200){if(	req4.responseText=="ufFygf")
{  

}else{

 if (req4.responseText.trim()==1)
 {
 app.Alert( "error please relogin" );
     app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Error"}');
 }
 else if(req4.responseText.trim()==2)
 {
  app.Alert( "User is blocked" );
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"User is blocked"}');
 }
 else if(req4.responseText.trim()==3)
 {
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Permission denied"}');
 }
 else
 {
 document.getElementById("emp").innerHTML = "";
  document.getElementById("pemp").innerHTML ="";
// app.SaveText("msg",'{"color":"green","msg":""}');
  //app.Execute("loader2(4);");   
     var alluser=req4.responseText.trim().split('@');

   for(var i = 0; i < alluser.length;  i++)
   {
   if (alluser[i].length<10)
   {}
   else
   {
   var  rec = JSON.parse(alluser[i]);
   var  pid =rec.id;
   var  pname=rec.name;

   document.getElementById("emp").innerHTML = document.getElementById("emp").innerHTML+'<option value="'+pid+'">'+pname+'</option>';
    document.getElementById("pemp").innerHTML = document.getElementById("pemp").innerHTML+'<option value="'+pid+'">'+pname+'</option>';
 }}
 }
}}}
	req4.send();
	}

	 function getwing()
 {
 var project =document.getElementById("project").value;
// app.Execute("loader2(1);");   
	var 	req3=new XMLHttpRequest();
	req3.open("GET",app.LoadText( "url" )+"getwing.php?id="+id+"&user="+User+"&pid="+project+"&token="+token,true);
		req3.onreadystatechange=function(){
if(	req3.readyState==4 && 	req3.status==200){if(	req3.responseText=="ufFygf")
{  

}else{

 if (req3.responseText.trim()==1)
 {
 app.Alert( "error please relogin" );
     app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Error"}');
 }
 else if(req3.responseText.trim()==2)
 {
  app.Alert( "User is blocked" );
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"User is blocked"}');
 }
 else if(req3.responseText.trim()==3)
 {
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Permission denied"}');
 }
 else
 {
 document.getElementById("wing").innerHTML = "";
// app.SaveText("msg",'{"color":"green","msg":""}');
  //app.Execute("loader2(4);");   
     var alluser=req3.responseText.trim().split('@');

   for(var i = 0; i < alluser.length;  i++)
   {
   if (alluser[i].length<10)
   {}
   else
   {
   var  rec = JSON.parse(alluser[i]);
   var  pid =rec.id;
   var  pwing =rec.wing;

   document.getElementById("wing").innerHTML = document.getElementById("wing").innerHTML+'<option value="'+pid+'">'+pwing+'</option>';
 
 }}
 }
}}}
	req3.send();
	}



function getproject()
{
app.Execute("loader2(1);");   
	var 	req2=new XMLHttpRequest();
	req2.open("GET",app.LoadText( "url" )+"fetchproject.php?id="+id+"&user="+User+"&token="+token,true);
	req2.onreadystatechange=function(){
if(	req2.readyState==4 && 	req2.status==200){if(	req2.responseText=="ufFygf")
{  

}else{
 if (req2.responseText.trim()==1)
 {
 app.Alert( "error please relogin" );
     app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Error"}');
 }
 
     app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":""}');
 
     var projectdata=req2.responseText.trim().split('@');
            app.SaveText( "projectdata",req2.responseText.trim() );
   for(var i = 0; i < projectdata.length ;  i++)
   {
   if (projectdata[i].length<3)
   {}
   else
   {
   var  rec = JSON.parse(projectdata[i]);
   var  pid=rec.id;
   var  pname=rec.name;
  
     document.getElementById("project").innerHTML= document.getElementById("project").innerHTML+'<option value="'+pid+'">'+pname+'</option>';
    
  
 }}
 var project =document.getElementById("project").value ;
document.getElementById("gk").src=url+"stockinfo.php?id="+id+"&user="+User+"&token="+token+"&project="+project;
 	getwing();
 	getemp();
}}}
	req2.send();
}
getproject();

</script>


</div>
</body>
</html>