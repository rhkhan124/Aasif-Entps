<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<script src='file:///android_asset/app.js'></script>
<link href="css/all.css" rel="stylesheet">

    <link href="boostrap/css/bootstrap2.css" rel="stylesheet">
    <link href="boostrap/css/bootstrap3.css" rel="stylesheet">
    <link href="boostrap/css/bootstrap4.css" rel="stylesheet">
    <link href="boostrap/css/bootstrap5.css" rel="stylesheet">
    <link href="boostrap/css/bootstrap6.css" rel="stylesheet">
    <link href="boostrap/css/bootstrap7.css" rel="stylesheet">
    <link href="boostrap/css/bootstrap8.css" rel="stylesheet">
    <link href="boostrap/css/swiper.min.css" rel="stylesheet">

<script src="js/all.js"></script>
    <script src="boostrap/js/jquery.js"></script>
    <script src="boostrap/js/date.js"></script>
    <script src="boostrap/js/date2.js"></script>
    <script src="boostrap/js/bootstrap.js" type="text/javascript" ></script>



</head>
<style id="mystyle">
.Cinput{
height:40px;
width:100%;
}
.Cbutton
{
height:40px;
width:40px;
}
input{
width:100%;
height:40px;
border:none;
outline:none;
background:none;
font-weight:bold;
font-family:times;
padding-left:10px;
}

.upload-btn-wrapper {
  position: relative;
  overflow: hidden;
  display: inline-block;
  width:100%;
}

.upload-btn-wrapper input[type=file] {
  font-size: 100px;
  position: absolute;
  left: 0;
  top: 0;
  opacity: 0;
}

.dropdown2 {
  position: relative;
  display: inline-block;
}

.dropdown-content2 {
  display: none;
  position: absolute;
  background-color: #f9f9f9;
  min-width: 160px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  padding: 12px 16px;
  z-index: 99;
}

.dropdown2:hover .dropdown-content2{
  display: block;
  
}

</style>
<script>  
app.SaveText("Change","index.html");
var themeColor = app.LoadText( "themeColor" );
var color = JSON.parse(themeColor);
var c1=color.c1;
var c2=color.c2;
var c3=color.c3;
var c4=color.c4;
var c5=color.c5;
var c6=color.c6;
var mytheme =app.LoadText( "mytheme" );
if (mytheme=="1")
{
document.getElementById("mystyle").innerHTML = document.getElementById("mystyle").innerHTML+" .fullBody{"
+"background: radial-gradient(ellipse farthest-corner at right bottom, #FEDB37 0%, #FDB931 8%, #9f7928 30%, #8A6E2F 40%, transparent 80%),"
+"radial-gradient(ellipse farthest-corner at left top, #FFFFFF 0%, #FFFFAC 8%, #D1B464 25%, #5d4a1f 62.5%, #5d4a1f 100%);"
+"height:100%;width:100%;margin:0;position:absolute;}"
+".mycontainer{"
+"background: radial-gradient(ellipse farthest-corner at right bottom, #FEDB37 0%, #FDB931 8%, #9f7928 30%, #8A6E2F 40%, transparent 80%) "
+", radial-gradient(ellipse farthest-corner at left top, #FFFFFF 0%, #FFFFAC 8%, #D1B464 25%, #5d4a1f 62.5%, #5d4a1f 100%);"
+"box-shadow:4px 4px 4px #"+c3+",-4px -4px 4px #"+c2+";"
+"font-weight:bold;}"
+".myinput{"
+"border:none;"
+"background:#"+c1+";"
+"outline:none;"
+"box-shadow:inset 5px 5px 5px #"+c3+", inset -5px -5px 5px #"+c2+";"
+"}"
+".mybutton{"
+"border:none;"
+"box-shadow:5px 5px 5px #"+c3+", -5px -5px 5px #"+c2+";"
+"outline:none;"
+"background: radial-gradient(ellipse farthest-corner at right bottom, #FEDB37 0%, #FDB931 8%, #9f7928 30%, #8A6E2F 40%, transparent 80%) "
+", radial-gradient(ellipse farthest-corner at left top, #FFFFFF 0%, #FFFFAC 8%, #D1B464 25%, #5d4a1f 62.5%, #5d4a1f 100%);"
+"font-weight:bold;font-family:times;}"
+".mybutton:hover{"
+"box-shadow:1px 1px 5px #"+c3+",  -1px -1px 5px #"+c2+";"
+"}"
+".FAA{color:#"+app.LoadText("fontA")+";}"
+".FB{color:#"+app.LoadText("fontB")+";}"
+".FC{color:#"+app.LoadText("fontC")+";}";
var size=app.LoadText("size").split(",");
for (i = 0; i < size.length; i++) {
document.getElementById("mystyle").innerHTML = document.getElementById("mystyle").innerHTML+" .F"+i+"{font-size:"+size[i]+"px;} ";
}
}
else
{
document.getElementById("mystyle").innerHTML = document.getElementById("mystyle").innerHTML+" body{"
+"background:#"+c1+";"
+"}"
+".mycontainer{"
+"background:#"+c1+";"
+"box-shadow:4px 4px 4px #"+c3+",-4px -4px 4px #"+c2+";"
+"}"
+".myinput{"
+"border:none;"
+"background:#E6E6E6;"
+"outline:none;"
+"box-shadow:inset 5px 5px 5px #"+c3+", inset -5px -5px 5px #"+c2+";"
+"}"
+".mytext{text-shadow: 2px 2px 2px #"+c3+", -2px -2px 2px #"+c2+";}"
+".mytext2{text-shadow: 1px 1px 1px #"+c3+", -1px -1px 1px #"+c2+";}"
+".mybutton{"
+"border:none;"
+"box-shadow:5px 5px 5px #"+c3+", -5px -5px 5px #"+c2+";"
+"outline:none;"
+"background:#"+c1+"; " 
+"}"
+".mybutton:hover{"
+"box-shadow:1px 1px 5px #"+c3+",  -1px -1px 5px #"+c2+";"
+"}"
+".FAA{color:#"+app.LoadText("fontA")+";}"
+".FB{color:#"+app.LoadText("fontB")+";}"
+".FC{color:#"+app.LoadText("fontC")+";}";
var size=app.LoadText("size").split(",");
for (i = 0; i < size.length; i++) {
document.getElementById("mystyle").innerHTML = document.getElementById("mystyle").innerHTML+" .F"+i+"{font-size:"+size[i]+"px;} ";
}
}
</script>

<body ondragstart="return false" onselectstart="return false">





<div class="mycontainer absolute" style="width:100%;height:400px;text-align:center;">
<strong class="F16" style="text-align:center;font-family:times;width:100%;">Folder & Files</strong>
<div class="" style="width:100%;align-content:right;">
<table style="width:95%;"><tr>
<td style="width:25%;">
<div class="upload-btn-wrapper" style="margin:3px;display:none;" id="ps1">
						<button class="FAA mybutton F10 button" onclick="movepast()" style="height:auto;width:100%;" > 
						Paste
             </button>
             </div></td>
<td style="width:25%;">
<div class="upload-btn-wrapper" style="margin:3px;display:none;" id="ps2">
						<button class="FAA mybutton F10 button"   style="height:auto;width:100%;" onclick="pcancel();"> 
						Cancel
             </button>
             </div></td>
<td style="width:25%;">
<div class="upload-btn-wrapper" style="margin:3px;">
						<button class="FAA mybutton F10 button" data-toggle="modal" data-target="#folderModal"style="height:auto;width:100%;" > 
						Add folder
             </button>
             </div></td><td style="">
<div class="upload-btn-wrapper" style="margin:3px;">
						<button class="FAA mybutton F10 button"   style="height:auto;width:100%;" > 
						<input type="file" name="myfile2" id="myfile2">Upload
             </button>
             </div>
             </td></tr></table>
</div>
<div class="" style="width:100%;text-align:left;">
<strong class="F10" style="text-align:center;font-family:times;width:95%;padding-left:5%;" id="badge">Home/</strong>
<button class="FAA mybutton F10 button" onclick="fback()" style="height:auto;width:100px;float:right;text-align:center;" > 
				Back
             </button>
</div>
<div class="myinput" style="widh:94%;height:330px;margin-left:3%;margin-right:3%;margin-bottom:10px;overflow: scroll;" id="myfolder">




</div>
<div class="modal fade" id="folderModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content mycontainer">
      <div class="modal-header">
        <h5 class="modal-title F16" id="exampleModalLabel">Add folder</h5>
      </div>
      <div class="modal-body">
     <div class="container" style="margin-top:10px;">                              
  <div class=" myinput" style="margin-top:5px;">
    <input class="F15 FAA" type="text" placeholder="Name" id="folder">
  </div>
</div>
      </div>
      <div class="modal-footer">
        <button type="button" class="mybutton" data-dismiss="modal">Close</button>
        <button type="button" class="mybutton" onclick="addfolder();" >Add Folder</button>
      </div>
    </div>
  </div>
</div>

</div>
<div class="modal fade" id="rename" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content mycontainer">
      <div class="modal-header">
        <h5 class="modal-title F16" id="exampleModalLabel">Rename File</h5>
      </div>
      <div class="modal-body">
     <div class="container" style="margin-top:10px;">                              
  <div class=" myinput" style="margin-top:5px;">
    <input class="F15 FAA" type="text" placeholder="File Name" id="filename">
  </div>
</div>
      </div>
      <div class="modal-footer">
        <button type="button" class="mybutton" data-dismiss="modal">Close</button>
        <button type="button" class="mybutton" onclick="uploadFile2();" >Upload</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="rename2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content mycontainer">
      <div class="modal-header">
        <h5 class="modal-title F16" id="exampleModalLabel">Rename File</h5>
      </div>
      <div class="modal-body">
     <div class="container" style="margin-top:10px;">                              
  <div class=" myinput" style="margin-top:5px;">
    <input class="F15 FAA" type="text" placeholder="File Name" id="filename2">
  </div>
</div>
      </div>
      <div class="modal-footer">
        <button type="button" class="mybutton" data-dismiss="modal">Close</button>
        <button type="button" class="mybutton" onclick="rename();" >Rename</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="viewer" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content mycontainer">
      <div class="modal-header">
        <h5 class="modal-title F16" id="exampleModalLabel">
        
        </h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" style="width: 100%; height: 550px;">
     <iframe id="mydoc" src=""
           onload="onMyFrameLoad();"style="width: 100%; height: 550px;" x rolling="auto">
        </iframe>
         </div>
      <div class="modal-footer">
        <button type="button" class="mybutton" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>


<script>

var url=app.LoadText( "url" );

 var  rec = JSON.parse(app.LoadText( "userDetails" ));
       var    id=rec.id;
       var    User=rec.user;
       var   token=rec.token;
       var company =rec.company;
       var   ustatus ="";
       var uid = app.LoadText( "uid" );
       var projectarray="";
       var calculatedAge="";
       var empid =app.LoadText( "empid" );
       var position =1;
 var ref1 ="home";
 var ref2 =empid;
 var ref3 ="home";
 var movep =0;
 var moveid ="";
 var reqtype="";
 var myfiletype2 ="";
var myfilename2 ="";
var myfileext2 ="";
var myfolder2 ="";



function addfolder()
{
if(position==6)
{
app.Alert( "You can not add more step folder !" )
}
else
{
var filename =document.getElementById("folder").value;
var ftype = "folder";
var request2 = "addfolder";

 app.Execute("loader2(1);");   

	var 	req2=new XMLHttpRequest();
	req2.open("GET",app.LoadText( "url" )+"folder.php?id="+id+"&user="+User+"&token="+token+"&req="+request2+"&filename="+filename+"&type="+ftype+"&position="+position+"&ref1="+ref1+"&ref2="+ref2,true);
	req2.onreadystatechange=function(){
if(	req2.readyState==4 && 	req2.status==200){if(	req2.responseText=="ufFygf")
{  

}else{
 if (req2.responseText.trim()==1)
 {
 app.Alert( "error please relogin" );
     app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Error"}');
     app.ClearData(  );
  app.exit();
 }
 else if(req2.responseText.trim()==2)
 {
  app.Alert( "User is blocked" );
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"User is blocked"}');
 }
 else if(req2.responseText.trim()==3)
 {
  app.Alert( "Permission denied contact admin" );
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Permission denied"}');
 }
 else if(req2.responseText.trim()==4)
 {
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"green","msg":"Seccessfully updated"}');
 }
 else if(req2.responseText.trim()==5)
 {
    app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"green","msg":"Seccessfully added"}');
   $('#folderModal').modal('hide');
   getfolder();
 }
 else
 {

 }
}}}
	req2.send();

}
}

function getfolder()
{


 app.Execute("loader2(1);");   


	var 	req3=new XMLHttpRequest();
	req3.open("GET",app.LoadText( "url" )+"getfolder.php?id="+id+"&user="+User+"&token="+token+"&position="+position+"&ref1="+ref1+"&ref2="+ref2,true);
	req3.onreadystatechange=function(){
if(	req3.readyState==4 && 	req3.status==200){if(	req3.responseText=="ufFygf")
{  

}else{
 if (req3.responseText.trim()==1)
 {
 app.Alert( "error please relogin" );
     app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Error"}');
     app.ClearData(  );
  app.exit();
 }
 else if(req3.responseText.trim()==2)
 {
  app.Alert( "User is blocked" );
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"User is blocked"}');
 }
 else if(req3.responseText.trim()==3)
 {
  app.Alert( "Permission denied contact admin" );
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Permission denied"}');
 }
else
{
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":""}');
document.getElementById("myfolder").innerHTML ="";

    var alluser=req3.responseText.trim().split('@');
   for(var i = 0; i < alluser.length ;  i++)
   {
   if (alluser[i].length<3)
   {}
   else
   {
   var  rec = JSON.parse(alluser[i]);
   var  gid =rec.id;
   var  gfilename =rec.filename;
   var  gfilecodename =rec.filecodename;
   var  gtype =rec.type;
   var  gposition =rec.position;
   var  gtype =rec.type;
   var  gext =rec.ext;
   var  gdate =rec.date;
   var  gtime =rec.time;
   var  guser =rec.user;
var icon ="";
var color ="";
var display ="block";
if(gtype=="folder")
{
icon ="fa-folder";
color ="#a88f32;";
var display ="none";
}
else if(gext=="pdf")
{
icon ="fa-file-pdf";
color ="red;";
}
else if(gext=="jpg")
{
icon ="fa-file-image";
color ="green;";
}
else if(gext=="png")
{
icon ="fa-file-image";
color ="green;";
}
else if(gext=="xlsx")
{
icon ="fa-file-excel";
color ="green;";
}
else if(gext=="xlsm")
{
icon ="fa-file-excel";
color ="green;";
}
else if(gext=="doc")
{
icon ="fa-file-word";
color ="blue;";
}
else if(gext=="docx")
{
icon ="fa-file-word";
color ="blue;";
}
else 
{
icon ="fa-file";
color ="dark;";
}

document.getElementById("myfolder").innerHTML = document.getElementById("myfolder").innerHTML  +'<div >'
+'<table style="width:94%;margin-left:3%;"><tr>'
+'<td style="text-align:left;width:5%;">'
+'<i class="F30 fas '+icon+'" style="color:'+color+'"></i>'
+'</td>'
+'<td style="text-align:left;" onclick="showfile('+gid+')">'
+'<strong class="F18" style="font-family:times;padding-left:10px;" id="foldername'+gid+'">'+gfilename+'</strong>'
+'</td>'
+'<td style="width:10%;">'
+'<div class="btn-group dropleft">'
+' <i class="F20 fas fa-ellipsis-v dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">'
+' </i>'
+'  <div class="F20 dropdown-menu dropdown-menu-right">'
+'     <li style="height:25px;padding-left:15px;font-family:times;border:1px solid black;"onclick="fmove('+gid+')" >Move</li>'
+'        <li style="height:25px;padding-left:15px;font-family:times;border:1px solid black;display:'+display+';" onclick="fcopy('+gid+')" >Copy</li>'
+'           <li style="height:25px;padding-left:15px;font-family:times;border:1px solid black;" onclick="rename2('+gid+')">Rename</li>'
+'              <li style="height:25px;padding-left:15px;font-family:times;border:1px solid black;" onclick="fdelete('+gid+')" >Delete</li>'
+'                 <li style="height:25px;padding-left:15px;font-family:times;border:1px solid black;content-align:left;text-align:left;display:'+display+';"><a style="margin:0px;padding:0px;"  href="'+url+'folder/'+gfilecodename+'.'+gext+'" download="'+gfilename+'">Download</a></li>'
+'  </div>'
+'</div>'
+'</td>'
+'</tr>'
+'</table>'
+'</div><hr style="margin:3px;border-color:black;">'
+'<input type="hidden" id="filename'+gid+'" value="'+gfilecodename+'.'+gext+'">'
+'<input type="hidden" id="filenameA'+gid+'" value="'+gfilecodename+'">'
+'<input type="hidden" id="fileext'+gid+'" value="'+gext+'">'
+'<input type="hidden" id="filetype'+gid+'" value="'+gtype+'">'
+'<input type="hidden" id="fileid'+gid+'" value="'+gid+'">'
}}
}

}}}
	req3.send();


}
getfolder();

function fback()
{

if(position==1)
{}
else
{
position =position-1;
   var myref=ref3.split(',');
         ref1 =myref[position-1];
             var mybadge = document.getElementById("badge").innerHTML.split('/');
             document.getElementById("badge").innerHTML="";
   for(var i = 0; i < position ;  i++)
   {var ds="";
   if(position==1)
   {
    document.getElementById("badge").innerHTML ="Home/";
   
   }else{
  document.getElementById("badge").innerHTML =document.getElementById("badge").innerHTML+mybadge[i]+"/";
   }
 
   }
         
         getfolder();
}}
function fmove(fd)
{
movep =fd;
reqtype="move";
document.getElementById("ps1").style.display="block";
document.getElementById("ps2").style.display="block";
}
function pcancel()
{
document.getElementById("ps1").style.display="none";
document.getElementById("ps2").style.display="none";
}
function fcopy(pf)
{
movep =pf;
reqtype="copy";

myfiletype2 =document.getElementById("filetype"+pf).value;
myfilename2 =document.getElementById("filenameA"+pf).value;
myfileext2 =document.getElementById("fileext"+pf).value;
myfolder2=document.getElementById("foldername"+pf).innerHTML;

document.getElementById("ps1").style.display="block";
document.getElementById("ps2").style.display="block";
}

function rename2(pk)
{
 movep =pk;

document.getElementById("filename2").value=document.getElementById("foldername"+pk).innerHTML;
$('#rename2').modal('show');
}
function rename()
{

var myfolder3 =document.getElementById("filename2").value;
$('#rename2').modal('hide');
 app.Execute("loader2(1);");   
	var 	req5=new XMLHttpRequest();
	req5.open("GET",app.LoadText( "url" )+"renamefolder.php?id="+id+"&user="+User+"&token="+token+"&fileid="+movep+"&filename="+myfolder3,true);
	req5.onreadystatechange=function(){
if(	req5.readyState==4 && 	req5.status==200){if(	req5.responseText=="ufFygf")
{  

}else{

 if (req5.responseText.trim()==1)
 {
 app.Alert( "error please relogin" );
     app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Error"}');
     app.ClearData(  );
  app.exit();
 }
 else if(req5.responseText.trim()==2)
 {
  app.Alert( "User is blocked" );
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"User is blocked"}');
 }
 else if(req5.responseText.trim()==3)
 {
  app.Alert( "Permission denied contact admin" );
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Permission denied"}');
 }
 else if(req5.responseText.trim()==4)
 {
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"green","msg":"Seccessfully renamed"}');
   getfolder();
 }
 else if(req5.responseText.trim()==5)
 {
    app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"green","msg":"Seccessfully copied"}');
 getfolder();
 }
 else
 {
     app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"green","msg":""}');
getfolder();
 }
}}}
	req5.send();
}

function movepast()
{
 app.Execute("loader2(1);");   
	var 	req5=new XMLHttpRequest();
	req5.open("GET",app.LoadText( "url" )+"movefolder.php?id="+id+"&user="+User+"&token="+token+"&filename="+myfolder2+"&type="+myfiletype2+"&position="+position+"&codename="+myfilename2 +"&extn="+myfileext2+"&req="+reqtype+"&ref3="+movep+"&ref1="+ref1+"&ref2="+ref2,true);
	req5.onreadystatechange=function(){
if(	req5.readyState==4 && 	req5.status==200){if(	req5.responseText=="ufFygf")
{  

}else{

 if (req5.responseText.trim()==1)
 {
 app.Alert( "error please relogin" );
     app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Error"}');
     app.ClearData(  );
  app.exit();
 }
 else if(req5.responseText.trim()==2)
 {
  app.Alert( "User is blocked" );
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"User is blocked"}');
 }
 else if(req5.responseText.trim()==3)
 {
  app.Alert( "Permission denied contact admin" );
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Permission denied"}');
 }
 else if(req5.responseText.trim()==4)
 {
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"green","msg":"Seccessfully moved"}');
   getfolder();
 }
 else if(req5.responseText.trim()==5)
 {
    app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"green","msg":"Seccessfully copied"}');
 getfolder();
 }
 else
 {
     app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"green","msg":""}');
getfolder();
 }
}}}
	req5.send();
}

function fdelete(pf)
{
movep =pf;


myfiletype2 =document.getElementById("filetype"+pf).value;
myfilename2 =document.getElementById("filenameA"+pf).value;
myfileext2 =document.getElementById("fileext"+pf).value;
myfolder2=document.getElementById("foldername"+pf).innerHTML;

    ynd = app.CreateYesNoDialog( "Are you sure want to delete" );
    ynd.SetOnTouch( Ynd_OnTouch );
    ynd.Show();

}

function Ynd_OnTouch( result )
{
if(result="yes")
{
 app.Execute("loader2(1);");   

	var 	req2=new XMLHttpRequest();
	req2.open("GET",app.LoadText( "url" )+"deletefolder.php?id="+id+"&user="+User+"&token="+token+"&reqid="+movep+"&filename="+myfilename2+"."+myfileext2+"&position="+position+"&ref1="+ref1+"&ref2="+ref2,true);
	req2.onreadystatechange=function(){
if(	req2.readyState==4 && 	req2.status==200){if(	req2.responseText=="ufFygf")
{  

}else{

 if (req2.responseText.trim()==1)
 {
 app.Alert( "error please relogin" );
     app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Error"}');
     app.ClearData(  );
  app.exit();
 }
 else if(req2.responseText.trim()==2)
 {
  app.Alert( "User is blocked" );
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"User is blocked"}');
 }
 else if(req2.responseText.trim()==3)
 {
  app.Alert( "Permission denied contact admin" );
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Permission denied"}');
 }
 else if(req2.responseText.trim()==4)
 {
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"green","msg":"Seccessfully updated"}');
 }
 else if(req2.responseText.trim()==5)
 {
    app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"green","msg":"Seccessfully added"}');
 
 }
 else
 {
     app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"green","msg":""}');
getfolder();
 }
}}}
	req2.send();
}}
function showfile(pp)
{
var myfiletype =document.getElementById("filetype"+pp).value;
if (myfiletype =="folder")
{
position =position+1;
ref1 =pp;
ref3 =ref3+","+pp;
document.getElementById("badge").innerHTML =document.getElementById("badge").innerHTML+document.getElementById("foldername"+pp).innerHTML+"/";
getfolder();
}
else
{
 app.Execute("loader2(1);");   
var myfilename =document.getElementById("filename"+pp).value;
var myfileext =document.getElementById("fileext"+pp).value;
if (myfileext =="png")
{
document.getElementById("mydoc").src="";
document.getElementById("mydoc").style="width:100%;height:550px;background:url("+url+"folder/"+myfilename+") no-repeat center center; background-size: 100% auto;";
}
else if (myfileext =="jpg")
{
document.getElementById("mydoc").src="";
document.getElementById("mydoc").style="width:100%;height:550px;background:url("+url+"folder/"+myfilename+") no-repeat center center; background-size: 100% auto;";
}
else
{
document.getElementById("mydoc").src="";
document.getElementById("mydoc").src="https://docs.google.com/gview?url="+url+"folder/"+myfilename+"&embedded=true";
document.getElementById("mydoc").style="width:100%;height:550px;";
}
  $('#viewer').modal('show');
}
}
					$('#viewer').on('hidden.bs.modal', function (e) {
document.getElementById("mydoc").src="";
});
						    
						    function onMyFrameLoad(){
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":""}');
};
						    
						          $("#myfile2").change(function(){
						      $('#rename').modal('show');
               
                document.getElementById("filename").value = document.getElementById('myfile2').files.item(0).name;
             
					});


 function _(el){ 	return document.getElementById(el); }

  function uploadFile2()
  { 
 $('#rename').modal('hide');
var filename =document.getElementById("filename").value;

  		var filep= _("myfile2").files[0]; 	
  // alert(file.name+" | "+file.size+" | "+file.type);
	var formdata = new FormData(); 
		formdata.append("myfile2", filep); 
			var ajax = new XMLHttpRequest(); 
				ajax.upload.addEventListener("progress", progressHandler, false); 	
				ajax.addEventListener("load", completeHandler, false); 	
				ajax.addEventListener("error", errorHandler, false); 	
				ajax.addEventListener("abort", abortHandler, false); 
					ajax.open("POST",app.LoadText( "url" )+"uploadfolder.php?id="+id+"&user="+User+"&token="+token+"&filecodename=&filename="+filename+"&type=file&position="+position+"&ref1="+ref1+"&ref2="+ref2);
					ajax.send(formdata); 
					function progressHandler(event){ 	
					var percent = (event.loaded / event.total) * 100; 	
			//		_("progressBar").value = Math.round(percent); 	
					app.Execute("loader2(2);");   
					
					app.Execute( "updatebar("+Math.round(percent)+");" );
					
					} 
					function completeHandler(event){ 	

				       app.Execute("loader2(4);");   
               app.SaveText("msg",'{"color":"green","msg":"Seccessfully uploded"}');
                getfolder();
					} function errorHandler(event){ 
					       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Uploading failed"}');
						} function abortHandler(event){ 	
       app.Execute("loader2(4);");   
   app.SaveText("msg",'{"color":"red","msg":"Connection aborted"}');
						} 
						
						}
</script>





</body>
</html>